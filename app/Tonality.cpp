#include "Tonality.h"
#include "ScreenBuffer.h"

namespace MusicReadingTrainer {

    std::vector<std::wstring> C_major = {
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> G_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> D_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> A_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> E_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"---#---------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> B_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"---#---------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"    #              |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> Gflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"     b             |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"----b--------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> Dflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"----b--------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> Aflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> Eflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> Bflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> F_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    void Tonality::initializeStaves() {

        staves = {

            { L"C", C_major },
            { L"G", G_major },
            { L"D", D_major },
            { L"A", A_major },
            { L"E", E_major },
            { L"B", B_major },
            { L"Gflat", Gflat_major },
            { L"Dflat", Dflat_major },
            { L"Aflat", Aflat_major },
            { L"Eflat", Eflat_major },
            { L"Bflat", Bflat_major },
            { L"F", F_major },

        };

    }

    Tonality::Tonality() {

        initializeStaves();

    }

    void Tonality::setActiveKey(const std::wstring& newKey) {

        if (staves.find(newKey) != staves.end()) {
            activeKey = newKey;
        }
        else {
            activeKey = L"C";
        }
    }

    void Tonality::draw(ScreenBuffer& screenBuffer) {

        const std::vector<std::wstring>& data = staves[activeKey];

        screenBuffer.setScreen(position_x, position_y, data);

    }

}