#include "Tonality.h"
#include "ScreenBuffer.h"

namespace MusicReadingTrainer {

    const wchar_t* C_major[] = {
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* G_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    const wchar_t* D_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* A_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* E_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"---#---------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* B_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"---#---------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"    #              |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    const wchar_t* Gflat_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"     b             |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"----b--------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    const wchar_t* Dflat_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"----b--------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* Aflat_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* Eflat_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    const wchar_t* Bflat_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    const wchar_t* F_major[] = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    void Tonality::initializeStaves() {

        staves = {

            { L"C", C_major },
            { L"G", G_major },
            { L"D", D_major },
            { L"A", A_major },
            { L"E", E_major },
            { L"B", B_major },
            { L"Gflat", Gflat_major },
            { L"Dflat", Dflat_major },
            { L"Aflat", Aflat_major },
            { L"Eflat", Eflat_major },
            { L"Bflat", Bflat_major },
            { L"F", F_major },

        };

    }

    Tonality::Tonality() {

        initializeStaves();

    }

    void Tonality::setActiveKey(const std::wstring& newKey) {

        if (staves.find(newKey) != staves.end()) {
            activeKey = newKey;
        }
        else {
            activeKey = L"C";
        }
    }

    void Tonality::draw(Renderer& renderer) {

        const wchar_t* const* data = staves[activeKey];

        renderer.setScreen(position_x, position_y, layoutHeight, data);

    }

}