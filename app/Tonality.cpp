#include "Tonality.h"
#include "ScreenBuffer.h"

namespace MusicReadingTrainer {

    std::vector<std::wstring> C_major = {
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> G_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> D_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> A_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> E_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"---#---------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> B_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"  #                |                                                                                           ",
        L"#------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"---#---------------|-------------------------------------------------------------------------------------------",
        L" #                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"    #              |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> Gflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"     b             |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"----b--------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> Dflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"----b--------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> Aflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"---b---------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> Eflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"  b                |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };


    std::vector<std::wstring> Bflat_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L" b                 |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    std::vector<std::wstring> F_major = {

        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"b------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"-------------------|-------------------------------------------------------------------------------------------",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
        L"                   |                                                                                           ",
    };

    void Tonality::initializeStaves() {

        staves = {

            { Key::C, C_major },
            { Key::G, G_major },
            { Key::D, D_major },
            { Key::A, A_major },
            { Key::E, E_major },
            { Key::B, B_major },
            { Key::Gflat, Gflat_major },
            { Key::Dflat, Dflat_major },
            { Key::Aflat, Aflat_major },
            { Key::Eflat, Eflat_major },
            { Key::Bflat, Bflat_major },
            { Key::F, F_major },

        };

    }

    Tonality::Tonality() {

        initializeStaves();

    }

    void Tonality::setActiveKey(Key newKey) {

        if (staves.find(newKey) != staves.end()) {
            activeKey = newKey;
        }
        else {
            activeKey = Key::C;
        }
    }

    void Tonality::draw(ScreenBuffer& screenBuffer) {

        const std::vector<std::wstring>& data = staves[activeKey];

        screenBuffer.setScreen(position_x, position_y, data);

    }

}